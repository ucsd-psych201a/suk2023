<!DOCTYPE html>
<html>
  <head>
    <title>RT Experiment</title>
    <!-- Load jsPsych and plugins -->
    <script src="https://unpkg.com/jspsych@8.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-likert@1.1.3"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script>
    <link href="https://unpkg.com/jspsych@8.0.0/css/jspsych.css" rel="stylesheet" />
    <style>
      /* Global style for text wrapping */
      .wrap-text {
        max-width: 800px;
        margin: 0 auto;
        line-height: 1.5;
        white-space: normal;
        text-align: left;
      }
    </style>
  </head>
  <body></body>
  <script>
    var jsPsych = initJsPsych({
      on_finish: function () {
        jsPsych.data.displayData();
      },
    });

    const subject_id = jsPsych.randomization.randomID(10);
    const filename = `${subject_id}.csv`;

    var timeline = [];

    // Welcome message
    var welcome = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "Welcome to our study! Press any key to begin.",
    };

    // Define unrelated survey questions
    var unrelatedSurveyQuestions = [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
          {
            prompt: "On average, how many hours of sleep do you get per night?",
            options: [
              "More than 10 hours",
              "9-10 hours",
              "7-8 hours",
              "5-6 hours",
              "4 hours or less",
            ],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyText,
        questions: [
          {
            prompt: "In one sentence, describe your favorite hobby.",
            placeholder: "Type your answer here",
            rows: 2,
            columns: 50,
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
          {
            prompt: "On average, how much time do you spend on this hobby daily?",
            options: [
              "More than 2 hours",
              "90-120 minutes",
              "60-90 minutes",
              "30-60 minutes",
              "Less than 30 minutes",
            ],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyLikert,
        questions: [
          {
            prompt:
              "How often during the day do you wish you had more time for this hobby?",
            labels: ["Not at all", "Rarely", "Sometimes", "Often", "Always"],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
          {
            prompt: "What is your preferred way to unwind after a busy day?",
            options: [
              "Watching TV or movies",
              "Reading",
              "Physical exercise (e.g., jogging, gym)",
              "Socializing with friends/family",
              "Other (please specify)",
            ],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
          {
            prompt: "How many hours per day do you typically spend on social media?",
            options: ["Less than 1 hour", "1-2 hours", "3-4 hours", "More than 4 hours"],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
          {
            prompt: "How often do you shop online?",
            options: ["Rarely", "Once a month", "Weekly", "Multiple times a week"],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
          {
            prompt: "Where do you prefer to spend your free time?",
            options: ["Mostly indoors", "Mostly outdoors", "Both equally"],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyLikert,
        questions: [
          {
            prompt: "How would you rate the typical stress level of your weekdays?",
            labels: [
              "Not stressful",
              "Slightly stressful",
              "Moderately stressful",
              "Very stressful",
              "Extremely stressful",
            ],
            required: true,
          },
        ],
      },
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
          {
            prompt: "How frequently do you feel productive during the day?",
            options: ["Rarely", "Occasionally", "Most days", "Almost every day"],
            required: true,
          },
        ],
      },
    ];

    // Instructions
    var instructions = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus:
        "Thank you for completing the survey. Press any key to continue.",
    };

    // Add unrelated survey questions to the timeline
    timeline.push(welcome);
    timeline = timeline.concat(unrelatedSurveyQuestions);
    timeline.push(prizeExplanationAndCheck, overheadInformationAndCheck, charityDescription);
    timeline.push(instructions);
    timeline.push(donationTrial); // Using custom donation trial
    timeline.push(satisfaction);
    timeline.push(demographics);
    timeline.push(gender);
    timeline.push(comments, endSurvey);
    timeline.push(save_data);

    // Run the experiment
    jsPsych.run(timeline);
  </script>
</html>
